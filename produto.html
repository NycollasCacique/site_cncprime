<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<title>Produto | CNCPrime</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="description" id="metaDesc">
<link rel="canonical" id="canonical">

<meta property="og:type" content="product">
<meta property="og:site_name" content="CNCPrime">
<meta property="og:title" id="ogTitle">
<meta property="og:description" id="ogDesc">
<meta property="og:image" id="ogImage">

<style>
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:#f4f6f8;
  color:#222;
}

/* FUNDO LOGO */
body::before{
  content:"";
  position:fixed;
  inset:0;
  background:url("images/logo-cncprime.png") repeat center;
  background-size:420px;
  opacity:0.03;
  pointer-events:none;
  z-index:0;
}

.container{
  max-width:1200px;
  margin:auto;
  padding:20px;
  position:relative;
  z-index:1;
}

header{
  display:flex;
  align-items:center;
  gap:12px;
  background:#fff;
  padding:15px;
  border-radius:12px;
}

header img{height:42px}

.voltar{
  display:inline-block;
  margin:15px 0;
  text-decoration:none;
  color:#6a1b9a;
  font-weight:bold;
}

/* PRODUTO */
.produto{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:40px;
  background:#fff;
  padding:25px;
  border-radius:16px;
}

@media(max-width:900px){
  .produto{grid-template-columns:1fr}
}

/* GALERIA */
.galeria img{
  width:100%;
  border-radius:12px;
}

.miniaturas{
  display:flex;
  gap:10px;
  margin-top:10px;
}

.miniaturas img{
  width:70px;
  height:70px;
  object-fit:cover;
  border-radius:8px;
  cursor:pointer;
  border:2px solid transparent;
}

.miniaturas img.active{
  border-color:#d4af37;
}

/* INFO */
.info h1{margin-top:0}

.info p{
  margin:6px 0;
  font-size:15px;
}

.preco{
  font-size:26px;
  font-weight:bold;
  color:#c9a227;
  margin:15px 0;
}

.codigo-next{
  font-size:14px;
  color:#666;
}

/* BOTAO */
.btn{
  display:inline-block;
  margin-top:20px;
  padding:14px 22px;
  background:#25d366;
  color:#fff;
  text-decoration:none;
  border-radius:30px;
  font-weight:bold;
}
</style>
</head>

<body>
<div class="container">

<header>
  <img src="images/logo-cncprime.png" alt="CNCPrime">
  <strong>CNCPrime</strong>
</header>

<a class="voltar" href="index.html">← Voltar ao catálogo</a>

<div id="produto" class="produto"></div>

</div>

<script src="js/produtos.js"></script>
<script>
const params = new URLSearchParams(window.location.search);
const id = params.get("id");
const produto = produtos.find(p => p.id === id);

if (!produto) {
  document.getElementById("produto").innerHTML = "<p>Produto não encontrado.</p>";
  throw new Error("Produto não encontrado");
}

// SEO dinâmico
document.title = produto.nome + " | CNCPrime";
document.getElementById("metaDesc").content = produto.seoDescription || produto.descricao;
document.getElementById("canonical").href = location.href;
document.getElementById("ogTitle").content = produto.nome;
document.getElementById("ogDesc").content = produto.seoDescription || produto.descricao;
document.getElementById("ogImage").content = location.origin + "/" + produto.imagens[0];

const galeria = `
  <div class="galeria">
    <img id="imgPrincipal" src="${produto.imagens[0]}" alt="${produto.nome}">
    <div class="miniaturas">
      ${produto.imagens.map((img,i)=>`
        <img src="${img}" class="${i===0?'active':''}"
        onclick="trocarImagem('${img}', this)">
      `).join("")}
    </div>
  </div>
`;

const info = `
  <div class="info">
    <h1>${produto.nome}</h1>
    <p><strong>Marca:</strong> ${produto.marca}</p>
    <p><strong>Modelo:</strong> ${produto.modelo}</p>
    <p><strong>Status:</strong> ${produto.status}</p>
    <p class="codigo-next"><strong>Cod.:</strong> ${produto.codigo_next}</p>

    <div class="preco">${produto.preco}</div>

    <p>${produto.descricao}</p>

    <a class="btn"
       href="https://wa.me/5516997094376?text=${encodeURIComponent(
         'Olá! Tenho interesse no produto ' + produto.nome +
         ' | Modelo: ' + produto.modelo +
         ' | Cod: ' + produto.codigo_next
       )}"
       target="_blank">
       Falar no WhatsApp
    </a>
  </div>
`;

document.getElementById("produto").innerHTML = galeria + info;

function trocarImagem(src, el){
  document.getElementById("imgPrincipal").src = src;
  document.querySelectorAll(".miniaturas img").forEach(i=>i.classList.remove("active"));
  el.classList.add("active");
}
</script>
</body>
</html>
